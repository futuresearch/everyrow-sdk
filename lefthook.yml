output:
  - summary

pre-commit:
  jobs:
    - name: "SDK Formatting"
      group:
        jobs:
          - name: format-sdk
            glob: "everyrow-sdk/**/*.py"
            exclude:
              - "everyrow-sdk/src/everyrow/generated/**"
            run: uv run --directory everyrow-sdk ruff format {staged_files}
            stage_fixed: true

    - name: "SDK Linting"
      group:
        jobs:
          - name: lint-sdk
            glob: "everyrow-sdk/**/*.py"
            exclude:
              - "everyrow-sdk/src/everyrow/generated/**"
            run: uv run --directory everyrow-sdk ruff check --fix {staged_files}
            stage_fixed: true

    - name: "SDK Typechecking"
      group:
        jobs:
          - name: typecheck-sdk
            glob: "everyrow-sdk/**/*.py"
            exclude:
              - "everyrow-sdk/src/everyrow/generated/**"
            run: uv run --directory everyrow-sdk basedpyright

    - name: "MCP Formatting"
      group:
        jobs:
          - name: format-mcp
            glob: "everyrow-mcp/**/*.py"
            run: uv run --directory everyrow-mcp ruff format {staged_files}
            stage_fixed: true

    - name: "MCP Linting"
      group:
        jobs:
          - name: lint-mcp
            glob: "everyrow-mcp/**/*.py"
            run: uv run --directory everyrow-mcp ruff check --fix {staged_files}
            stage_fixed: true
